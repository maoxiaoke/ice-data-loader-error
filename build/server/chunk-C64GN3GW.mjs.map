{
  "version": 3,
  "sources": ["../../.ice/Users/nazha/nazha-demos/ice-loader/.ice/index.ts", "../../node_modules/.pnpm/npm.urbanic-inc.com+@ice+plugin-auth@1.0.0_biqbaboplfbrettd7655fr4n2y/node_modules/@ice/plugin-auth/esm/runtime/index.js", "../../node_modules/.pnpm/npm.urbanic-inc.com+@ice+plugin-auth@1.0.0_biqbaboplfbrettd7655fr4n2y/node_modules/@ice/plugin-auth/esm/runtime/Auth.js"],
  "sourcesContent": ["import type { PageConfig } from './types';\nimport { Link, Outlet, useParams, useSearchParams, useLocation, useNavigate } from '@ice/runtime/router';\nimport { defineAppConfig, useAppData, useData, useConfig, Meta, Title, Links, Scripts, Data, Main, history, KeepAliveOutlet, useMounted, ClientOnly, defineDataLoader, defineServerDataLoader, defineStaticDataLoader } from '@ice/runtime';\nimport { withAuth, useAuth } from '@ice/plugin-auth/esm/runtime';\n\nfunction definePageConfig(pageConfig: () => PageConfig): () => PageConfig {\n  return pageConfig;\n}\n\nexport {\n  definePageConfig,\n  Link,\n  Outlet,\n  useParams,\n  useSearchParams,\n  useLocation,\n  useNavigate,\n  defineAppConfig,\n  useAppData,\n  useData,\n  useConfig,\n  Meta,\n  Title,\n  Links,\n  Scripts,\n  Data,\n  Main,\n  history,\n  KeepAliveOutlet,\n  useMounted,\n  ClientOnly,\n  defineDataLoader,\n  defineServerDataLoader,\n  defineStaticDataLoader,\n  withAuth,\n  useAuth,};\n\nexport * from './types';\n", "import * as React from 'react';\nimport { AuthProvider, useAuth, withAuth } from './Auth.js';\nexport { withAuth, useAuth };\nconst EXPORT_NAME = 'authConfig';\nconst runtime = async ({ appContext, useConfig, addProvider, addWrapper }) => {\n    const { appExport, appData } = appContext;\n    const exported = appExport[EXPORT_NAME];\n    const authConfig = (typeof exported === 'function' ? await exported(appData) : exported) || {};\n    const initialAuth = authConfig.initialAuth || {};\n    const AuthProviderWrapper = ({ children }) => {\n        const [state, setState] = React.useState(initialAuth);\n        const updateState = (newState = {}) => {\n            setState({\n                ...state,\n                ...newState,\n            });\n        };\n        return React.createElement(AuthProvider, { value: [state, updateState] }, children);\n    };\n    addProvider(AuthProviderWrapper);\n    const AuthRouteWrapper = ({ children }) => {\n        const [auth] = useAuth();\n        const routeConfig = useConfig();\n        const routeConfigAuth = routeConfig === null || routeConfig === void 0 ? void 0 : routeConfig.auth;\n        if (routeConfigAuth && !Array.isArray(routeConfigAuth)) {\n            throw new Error('config.auth must be an array');\n        }\n        const hasAuth = Array.isArray(routeConfigAuth) && routeConfigAuth.length\n            ? Object.keys(auth).filter((item) => (routeConfigAuth.includes(item) ? auth[item] : false)).length\n            : true;\n        if (!hasAuth) {\n            if (authConfig.NoAuthFallback) {\n                return React.createElement(authConfig.NoAuthFallback, { routeConfig: routeConfig });\n            }\n            return React.createElement(React.Fragment, null, \"No Auth\");\n        }\n        return React.createElement(React.Fragment, null, children);\n    };\n    addWrapper(AuthRouteWrapper);\n};\nexport default runtime;\n//# sourceMappingURL=index.js.map", "import * as React from 'react';\nimport { createContext, useContext } from 'react';\nconst Context = createContext(null);\nContext.displayName = 'AuthContext';\nconst AuthProvider = Context.Provider;\nconst useAuth = () => {\n    const value = useContext(Context);\n    return value;\n};\n// class \u7EC4\u4EF6\u652F\u6301 Hoc \u7528\u6CD5\nfunction withAuth(Component) {\n    const AuthWrapped = (props) => {\n        const [auth, setAuth] = useAuth();\n        return React.createElement(Component, { ...props, auth: auth, setAuth: setAuth });\n    };\n    return AuthWrapped;\n}\nexport { useAuth, withAuth, AuthProvider, };\n//# sourceMappingURL=Auth.js.map"],
  "mappings": ";;;;;;;AACA,SAASA,MAAMC,QAAQC,WAAWC,iBAAiBC,aAAaC,mBAAmB;AACnF,SAASC,iBAAiBC,YAAYC,SAASC,WAAWC,MAAMC,OAAOC,OAAOC,SAASC,MAAMC,MAAMC,SAASC,iBAAiBC,YAAYC,YAAYC,kBAAkBC,wBAAwBC,8BAA8B;;;ACF7N,YAAYC,YAAW;;;ACAvB,YAAY,WAAW;AACvB,SAAS,eAAe,kBAAkB;AAC1C,IAAM,UAAU,cAAc,IAAI;AAClC,QAAQ,cAAc;AACtB,IAAM,eAAe,QAAQ;AAC7B,IAAM,UAAU,MAAM;AAClB,QAAM,QAAQ,WAAW,OAAO;AAChC,SAAO;AACX;;;ADLA,IAAM,cAAc;AACpB,IAAM,UAAU,OAAO,EAAE,YAAY,WAAAC,YAAW,aAAa,WAAW,MAAM;AAC1E,QAAM,EAAE,WAAW,QAAQ,IAAI;AAC/B,QAAM,WAAW,UAAU;AAC3B,QAAM,cAAc,OAAO,aAAa,aAAa,MAAM,SAAS,OAAO,IAAI,aAAa,CAAC;AAC7F,QAAM,cAAc,WAAW,eAAe,CAAC;AAC/C,QAAM,sBAAsB,CAAC,EAAE,SAAS,MAAM;AAC1C,UAAM,CAAC,OAAO,QAAQ,IAAU,gBAAS,WAAW;AACpD,UAAM,cAAc,CAAC,WAAW,CAAC,MAAM;AACnC,eAAS;AAAA,QACL,GAAG;AAAA,QACH,GAAG;AAAA,MACP,CAAC;AAAA,IACL;AACA,WAAa,qBAAc,cAAc,EAAE,OAAO,CAAC,OAAO,WAAW,EAAE,GAAG,QAAQ;AAAA,EACtF;AACA,cAAY,mBAAmB;AAC/B,QAAM,mBAAmB,CAAC,EAAE,SAAS,MAAM;AACvC,UAAM,CAAC,IAAI,IAAI,QAAQ;AACvB,UAAM,cAAcA,WAAU;AAC9B,UAAM,kBAAkB,gBAAgB,QAAQ,gBAAgB,SAAS,SAAS,YAAY;AAC9F,QAAI,mBAAmB,CAAC,MAAM,QAAQ,eAAe,GAAG;AACpD,YAAM,IAAI,MAAM,8BAA8B;AAAA,IAClD;AACA,UAAM,UAAU,MAAM,QAAQ,eAAe,KAAK,gBAAgB,SAC5D,OAAO,KAAK,IAAI,EAAE,OAAO,CAAC,SAAU,gBAAgB,SAAS,IAAI,IAAI,KAAK,QAAQ,KAAM,EAAE,SAC1F;AACN,QAAI,CAAC,SAAS;AACV,UAAI,WAAW,gBAAgB;AAC3B,eAAa,qBAAc,WAAW,gBAAgB,EAAE,YAAyB,CAAC;AAAA,MACtF;AACA,aAAa,qBAAoB,iBAAU,MAAM,SAAS;AAAA,IAC9D;AACA,WAAa,qBAAoB,iBAAU,MAAM,QAAQ;AAAA,EAC7D;AACA,aAAW,gBAAgB;AAC/B;AACA,IAAO,kBAAQ;;;ADnCf,SAASC,iBAAiBC,YAAgD;AACxE,SAAOA;AACT;",
  "names": ["Link", "Outlet", "useParams", "useSearchParams", "useLocation", "useNavigate", "defineAppConfig", "useAppData", "useData", "useConfig", "Meta", "Title", "Links", "Scripts", "Data", "Main", "history", "KeepAliveOutlet", "useMounted", "ClientOnly", "defineDataLoader", "defineServerDataLoader", "defineStaticDataLoader", "React", "useConfig", "definePageConfig", "pageConfig"]
}
